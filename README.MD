
# ğŸ¤– FinBot â€“ RAG-Based Chatbot with Role-Based Access Control(RBAC)

**FinBot** is a secure, role-aware AI assistant designed for internal company usage.

It uses Retrieval-Augmented Generation (RAG) to answer employee queries strictly from authorized documents, ensuring data privacy and access control.

The system integrates FastAPI, LangChain, ChromaDB, Ollama (local LLM), and Streamlit into a scalable and secure chatbot platform.

---

## ğŸš€ Key Features

 ğŸ” **JWT-based login & authentication**

 ğŸ‘¥ **Role-Based Access Control (RBAC)** 

ğŸ“„ Retrieval-Augmented Generation (RAG) pipeline

ğŸ¤– Local LLM via Ollama (phi-3 / mistral)

ğŸ§  Application-level in-memory caching

ğŸ“š ChromaDB vector storage

ğŸŒ Streamlit user interface

ğŸ” Document chunking, embedding & metadata filtering

ğŸ“Œ Source document traceability

---

## âš™ï¸ Tech Stack

| Component     | Tool/Service                              |
|---------------|-------------------------------------------|
| LLM           | Ollama (Local LLM: phi-3 / mistral)|
| Backend       | FastAPI                                   |
| Frontend      | Streamlit                                 |
| Vector Store  | ChromaDB                                  |
| Embeddings    | Sentence Transformers (MiniLM)            |
| RAG Pipeline  | LangChain                                 |
| Auth System   | JWT (`python-jose`)                       |
| Cache         | Application-Level In-Memory Cache
---

## ğŸ‘¥ Role Definitions & Access

| Role        | Access To Documents              |
|-------------|----------------------------------|
| **Finance**     | Finance + General             |
| **HR**          | HR + General                  |
| **Marketing**   | Marketing + General           |
| **Engineering** | Engineering + General         |
| **C-Level**     | All departments               |
| **Employee**    | General only                  |

ğŸ”’ Access is enforced at **document chunk level** using metadata like `role_Finance=True`.

---
##ğŸ§  Caching Strategy (Application-Level):
-----------------------------------------
FinBot implements application-level in-memory caching to improve performance.

Cache Key: (User Role + Query)

Avoids repeated vector search and LLM calls

Improves response speed significantly

Implemented inside the chatbot service layer

âš ï¸ Cache is reset automatically when the backend restarts.
----
## ğŸ§± Architecture Overview

[Streamlit UI] --> /login --> [FastAPI Backend] --> [JWT Token Issued]
                                     â†“
                                /chat POST
                                     â†“
                            Role-Based Filter
                                     â†“
                            [ChromaDB + LangChain]
                                     â†“
                            [Ollama Local LLM]
                                     â†“
                          [Response + Source shown]
Documents are:

-Chunked using RecursiveCharacterTextSplitter

-Stored in ChromaDB

-Embedded using MiniLM

-Tagged with metadata (department, roles, access flags)

-Retrieved using LangChain retriever with role-based filtering
----------------------------------------------------------------------------------------------------------------
ğŸ› ï¸ Setup Instructions:

recommended python version:

----Python 3.11.0----------recommended
-----visual studio code-------recommended
-----Operating System---Windows

ğŸ 1. Create  Virtual Environment
 
ğŸ“¦ Step 1: Open a terminal inside your project directory and run:

    python -m venv venv

âš™ï¸ Step 2: Activate the Virtual Environment

    .\venv\Scripts\Activate.ps1

ğŸ§ª 2. Install Dependencies

    pip install -r requirements.txt

ğŸ” 3. Configure .env

---.env file in the root directory of the project:

---Paste your JWT_SECRET_key into it like this:

JWT_SECRET_KEY=your_secret_key_here

LLM_PROVIDER=ollama

OLLAMA_MODEL=phi3

ğŸ“‚ 4. Ingest Documents into ChromaDB

 # âœ… This will generate the chroma_db folder from your markdown and CSV files

    python -m backend.ingest


â–¶ï¸ How to Run the Project:
---------------------------

ğŸŸ¢ 1. Start Backend (FastAPI)
   
    uvicorn backend.api.main:app --reload

    Visit: http://127.0.0.1:8000

ğŸ–¥ï¸ 2. Start Frontend (Streamlit)
    
    streamlit run frontend/app.py

  - Visit: http://localhost:8501

API Testing:
http://127.0.0.1:8000/docs
Test:

/login

/chat

JWT authentication flow

----------------------------------------------------------------------------------------------------------------------

ğŸ’¬ Usage Example
-------------------


Username: hr||marketing||finance||employee||ceo||admin||cto||-- (any one!!)

password: Username123

------------------
Ask Question according to the role:

-What is the companyâ€™s vision and mission?--(emploee)

-Where is FinSolve headquartered?--(engineering)

-What was the total revenue in Q4 2024?--(finace)

-What was the customer acquisition target for Q4 2024?--(marketing)

-any question from the company for-- (c-Level)

ğŸ”’ Security Features:
-----------------------
--JWT token validation

--Role-based document filtering

--No unauthorized document access

--No raw database fields exposed

--Strict context-only answer generation

### ğŸ”‘ Login Credentials

Username examples:
- hr
- finance
- marketing
- employee
- admin

Password format:
`<username>123`

Example:
- Username: hr  
- Password: `hr123`


ğŸ“ Folder Structure:

    finbot/
    â”œâ”€â”€ .env
    â”œâ”€â”€ README.MD
    â”œâ”€â”€ requirements.txt
    â”œâ”€â”€ backend/
    â”‚   â”œâ”€â”€ ingest.py
    â”‚   â”œâ”€â”€ users.db
    â”‚   â”œâ”€â”€ api/
    â”‚   â”‚   â”œâ”€â”€ auth.py
    â”‚   â”‚   â”œâ”€â”€ chatbot.py
    â”‚   â”‚   â”œâ”€â”€ main.py
    â”‚   â”‚   â”œâ”€â”€ models.py
    â”‚   â”œâ”€â”€ core/
    â”‚   â”‚   â”œâ”€â”€ config.py
    â”‚   â”‚   â”œâ”€â”€ vectorstore.py
            |__ __init__.py
            
    â”‚   â”œâ”€â”€ db/
            |__seed_users.py
    â”‚   â”‚   â”œâ”€â”€ user_db.py
    â”œâ”€â”€ data/
    â”‚   â”œâ”€â”€ engineering/
    â”‚   â”œâ”€â”€ finance/
    â”‚   â”œâ”€â”€ general/
    â”‚   â”œâ”€â”€ hr/
    â”‚   â””â”€â”€ marketing/
    â””â”€â”€ frontend/
        â””â”€â”€ app.py








