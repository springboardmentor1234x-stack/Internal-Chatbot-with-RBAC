name: CI Pipeline

on:
  push:
    branches: [ main, Sreevidya-P-S ]
  pull_request:
    branches: [ main ]

jobs:
  basic-check:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Set up Python 3.11
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
    
    - name: Install minimal dependencies
      run: |
        python -m pip install --upgrade pip
        pip install fastapi pydantic
    
    - name: Check Python syntax
      run: |
        echo "âœ… Checking Python syntax..."
        python -m py_compile app/main.py
        python -m py_compile app/auth_utils.py
        python -m py_compile app/routes.py
        echo "âœ… All main files have valid Python syntax"
    
    - name: Verify project structure
      run: |
        echo "âœ… Checking project structure..."
        test -f app/main.py && echo "âœ… app/main.py exists"
        test -f app/auth_utils.py && echo "âœ… app/auth_utils.py exists"
        test -f app/routes.py && echo "âœ… app/routes.py exists"
        test -f frontend/app.py && echo "âœ… frontend/app.py exists"
        test -f requirements_simple.txt && echo "âœ… requirements_simple.txt exists"
        echo "âœ… Project structure is valid"
    
    - name: Success message
      run: |
        echo "ðŸŽ‰ CI Pipeline completed successfully!"
        echo "âœ… All checks passed"